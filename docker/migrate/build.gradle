/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.1.1/samples
 */
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'org.flywaydb:flyway-gradle-plugin:7.12.1'
        classpath 'mysql:mysql-connector-java:8.0.15'
    }
}

plugins {
    id "java"
    id "org.flywaydb.flyway" version "7.12.1"
}

repositories {
    mavenCentral()
}

flyway {
    url = getProperty("${profile}.flyway.url") + "?&allowPublicKeyRetrieval=true&useSSL=false"
    user = getProperty("${profile}.flyway.user")
    password = getProperty("${profile}.flyway.password")
    baselineVersion = "00.000.000"
}

def getProfile() {
    def profile = project.properties['env'] == null ? 'local' : project.properties['env']
    return profile
}